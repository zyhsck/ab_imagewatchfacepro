{"version":3,"file":"main.js","sources":["webpack://astrobox-plugin-template/./node_modules/astrobox-plugin-sdk/dist/impls/config.js","webpack://astrobox-plugin-template/./node_modules/astrobox-plugin-sdk/dist/utils.js","webpack://astrobox-plugin-template/./node_modules/astrobox-plugin-sdk/dist/impls/debug.js","webpack://astrobox-plugin-template/./node_modules/astrobox-plugin-sdk/dist/impls/device.js","webpack://astrobox-plugin-template/./node_modules/astrobox-plugin-sdk/dist/impls/event.js","webpack://astrobox-plugin-template/./node_modules/astrobox-plugin-sdk/dist/impls/filesystem.js","webpack://astrobox-plugin-template/./node_modules/astrobox-plugin-sdk/dist/impls/installer.js","webpack://astrobox-plugin-template/webpack/runtime/rspack_version","webpack://astrobox-plugin-template/webpack/runtime/rspack_unique_id","webpack://astrobox-plugin-template/./node_modules/astrobox-plugin-sdk/dist/impls/interconnect.js","webpack://astrobox-plugin-template/./node_modules/astrobox-plugin-sdk/dist/impls/lifecycle.js","webpack://astrobox-plugin-template/./node_modules/astrobox-plugin-sdk/dist/impls/native.js","webpack://astrobox-plugin-template/./node_modules/astrobox-plugin-sdk/dist/impls/network.js","webpack://astrobox-plugin-template/./node_modules/astrobox-plugin-sdk/dist/impls/provider.js","webpack://astrobox-plugin-template/./node_modules/astrobox-plugin-sdk/dist/impls/thirdpartyapp.js","webpack://astrobox-plugin-template/./node_modules/astrobox-plugin-sdk/dist/impls/ui.js","webpack://astrobox-plugin-template/./node_modules/astrobox-plugin-sdk/dist/index.js","webpack://astrobox-plugin-template/./node_modules/astrobox-plugin-sdk/dist/init.js","webpack://astrobox-plugin-template/./src/main.js"],"sourcesContent":["export function read() {\n    var _a, _b;\n    // @ts-ignore\n    if (typeof ((_b = (_a = globalThis.AstroBox) === null || _a === void 0 ? void 0 : _a.config) === null || _b === void 0 ? void 0 : _b.readConfig) === \"function\") {\n        // @ts-ignore\n        return JSON.parse(globalThis.AstroBox.config.readConfig());\n    }\n    else {\n        throw new Error('AstroBox.config.readConfig not available on native side');\n    }\n}\nexport function write(content) {\n    var _a, _b;\n    // @ts-ignore\n    if (typeof ((_b = (_a = globalThis.AstroBox) === null || _a === void 0 ? void 0 : _a.config) === null || _b === void 0 ? void 0 : _b.writeConfig) === \"function\") {\n        // @ts-ignore\n        globalThis.AstroBox.config.writeConfig(JSON.stringify(content));\n    }\n    else {\n        throw new Error('AstroBox.config.writeConfig not available on native side');\n    }\n}\n","export function uint8ArrayToBase64(bytes) {\n    const base64abc = [\n        \"A\", \"B\", \"C\", \"D\", \"E\", \"F\", \"G\", \"H\", \"I\", \"J\", \"K\", \"L\", \"M\", \"N\", \"O\", \"P\",\n        \"Q\", \"R\", \"S\", \"T\", \"U\", \"V\", \"W\", \"X\", \"Y\", \"Z\",\n        \"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\", \"i\", \"j\", \"k\", \"l\", \"m\", \"n\", \"o\", \"p\",\n        \"q\", \"r\", \"s\", \"t\", \"u\", \"v\", \"w\", \"x\", \"y\", \"z\",\n        \"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"+\", \"/\"\n    ];\n    let result = '', i;\n    const l = bytes.length;\n    for (i = 2; i < l; i += 3) {\n        result += base64abc[bytes[i - 2] >> 2];\n        result += base64abc[((bytes[i - 2] & 0x03) << 4) | (bytes[i - 1] >> 4)];\n        result += base64abc[((bytes[i - 1] & 0x0f) << 2) | (bytes[i] >> 6)];\n        result += base64abc[bytes[i] & 0x3f];\n    }\n    if (i === l + 1) {\n        result += base64abc[bytes[i - 2] >> 2];\n        result += base64abc[(bytes[i - 2] & 0x03) << 4];\n        result += '==';\n    }\n    if (i === l) {\n        result += base64abc[bytes[i - 2] >> 2];\n        result += base64abc[((bytes[i - 2] & 0x03) << 4) | (bytes[i - 1] >> 4)];\n        result += base64abc[(bytes[i - 1] & 0x0f) << 2];\n        result += '=';\n    }\n    return result;\n}\nexport function base64ToUint8Array(base64) {\n    base64 = base64.replace(/[\\r\\n\\s]/g, '');\n    if (base64.length % 4 !== 0) {\n        throw new Error('Invalid base64 string length');\n    }\n    const table = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n    let padding = 0;\n    if (base64.endsWith('=='))\n        padding = 2;\n    else if (base64.endsWith('='))\n        padding = 1;\n    const byteLength = (base64.length / 4) * 3 - padding;\n    const arr = new Uint8Array(byteLength);\n    let byteIdx = 0;\n    for (let i = 0; i < base64.length; i += 4) {\n        const n = (table.indexOf(base64[i]) << 18) |\n            (table.indexOf(base64[i + 1]) << 12) |\n            (table.indexOf(base64[i + 2]) << 6) |\n            table.indexOf(base64[i + 3]);\n        if (byteIdx < byteLength)\n            arr[byteIdx++] = (n >> 16) & 0xff;\n        if (byteIdx < byteLength)\n            arr[byteIdx++] = (n >> 8) & 0xff;\n        if (byteIdx < byteLength)\n            arr[byteIdx++] = n & 0xff;\n    }\n    return arr;\n}\nexport function uint8ArrayToString(arr) {\n    let out = '';\n    let i = 0;\n    while (i < arr.length) {\n        const byte1 = arr[i++];\n        if (byte1 < 0x80) {\n            out += String.fromCharCode(byte1);\n        }\n        else if (byte1 >= 0xc0 && byte1 < 0xe0) {\n            const byte2 = arr[i++];\n            out += String.fromCharCode(((byte1 & 0x1f) << 6) | (byte2 & 0x3f));\n        }\n        else if (byte1 >= 0xe0 && byte1 < 0xf0) {\n            const byte2 = arr[i++];\n            const byte3 = arr[i++];\n            out += String.fromCharCode(((byte1 & 0x0f) << 12) | ((byte2 & 0x3f) << 6) | (byte3 & 0x3f));\n        }\n        else {\n            // 4字节转为utf-16代理对\n            const byte2 = arr[i++];\n            const byte3 = arr[i++];\n            const byte4 = arr[i++];\n            let codepoint = ((byte1 & 0x07) << 18) |\n                ((byte2 & 0x3f) << 12) |\n                ((byte3 & 0x3f) << 6) |\n                (byte4 & 0x3f);\n            codepoint -= 0x10000;\n            out += String.fromCharCode(0xd800 + (codepoint >> 10), 0xdc00 + (codepoint & 0x3ff));\n        }\n    }\n    return out;\n}\nexport function stringToUint8Array(str) {\n    const arr = [];\n    for (let i = 0; i < str.length; i++) {\n        let code = str.charCodeAt(i);\n        if (code < 0x80) {\n            arr.push(code);\n        }\n        else if (code < 0x800) {\n            arr.push(0xc0 | (code >> 6));\n            arr.push(0x80 | (code & 0x3f));\n        }\n        else if (code >= 0xd800 && code <= 0xdbff) {\n            // 代理对\n            const next = str.charCodeAt(++i);\n            const codepoint = ((code - 0xd800) << 10) + (next - 0xdc00) + 0x10000;\n            arr.push(0xf0 | (codepoint >> 18));\n            arr.push(0x80 | ((codepoint >> 12) & 0x3f));\n            arr.push(0x80 | ((codepoint >> 6) & 0x3f));\n            arr.push(0x80 | (codepoint & 0x3f));\n        }\n        else {\n            arr.push(0xe0 | (code >> 12));\n            arr.push(0x80 | ((code >> 6) & 0x3f));\n            arr.push(0x80 | (code & 0x3f));\n        }\n    }\n    return new Uint8Array(arr);\n}\n","import { uint8ArrayToBase64 } from \"../utils.js\";\nexport async function sendRaw(data) {\n    var _a, _b;\n    // @ts-ignore\n    if (typeof ((_b = (_a = globalThis.AstroBox) === null || _a === void 0 ? void 0 : _a.debug) === null || _b === void 0 ? void 0 : _b.sendRaw) === \"function\") {\n        // @ts-ignore\n        await globalThis.AstroBox.debug.sendRaw(uint8ArrayToBase64(data));\n    }\n    else {\n        throw new Error('AstroBox.debug.sendRaw not available on native side');\n    }\n}\n","export function getDeviceList() {\n    var _a, _b;\n    // @ts-ignore\n    if (typeof ((_b = (_a = globalThis.AstroBox) === null || _a === void 0 ? void 0 : _a.device) === null || _b === void 0 ? void 0 : _b.getDeviceList) === \"function\") {\n        // @ts-ignore\n        return JSON.parse(globalThis.AstroBox.device.getDeviceList());\n    }\n    else {\n        throw new Error('AstroBox.device.getDeviceList not available on native side');\n    }\n}\nexport function getDeviceState(addr) {\n    var _a, _b;\n    // @ts-ignore\n    if (typeof ((_b = (_a = globalThis.AstroBox) === null || _a === void 0 ? void 0 : _a.device) === null || _b === void 0 ? void 0 : _b.getDeviceState) === \"function\") {\n        // @ts-ignore\n        return JSON.parse(globalThis.AstroBox.device.getDeviceState(addr));\n    }\n    throw new Error(\"AstroBox.device.getDeviceState not available on native side\");\n}\nexport function modifyDeviceState(addr, state) {\n    var _a, _b;\n    // @ts-ignore\n    if (typeof ((_b = (_a = globalThis.AstroBox) === null || _a === void 0 ? void 0 : _a.device) === null || _b === void 0 ? void 0 : _b.modifyDeviceState) === \"function\") {\n        // @ts-ignore\n        globalThis.AstroBox.device.modifyDeviceState(addr, JSON.stringify(state));\n    }\n    else {\n        throw new Error(\"AstroBox.device.modifyDeviceState not available on native side\");\n    }\n}\nexport async function disconnectDevice() {\n    var _a, _b;\n    // @ts-ignore\n    if (typeof ((_b = (_a = globalThis.AstroBox) === null || _a === void 0 ? void 0 : _a.device) === null || _b === void 0 ? void 0 : _b.disconnectDevice) === \"function\") {\n        // @ts-ignore\n        await globalThis.AstroBox.device.disconnectDevice();\n    }\n    else {\n        throw new Error(\"AstroBox.device.disconnectDevice not available on native side\");\n    }\n}\n","export function addEventListener(eventName, callback) {\n    var _a, _b;\n    // @ts-ignore\n    if (typeof ((_b = (_a = globalThis.AstroBox) === null || _a === void 0 ? void 0 : _a.event) === null || _b === void 0 ? void 0 : _b.addEventListener) === \"function\") {\n        // @ts-ignore\n        globalThis.AstroBox.event.addEventListener(eventName, callback);\n    }\n    else {\n        throw new Error(\"AstroBox.event.addEventListener not available\");\n    }\n}\nexport function removeEventListener(eventName) {\n    var _a, _b;\n    // @ts-ignore\n    if (typeof ((_b = (_a = globalThis.AstroBox) === null || _a === void 0 ? void 0 : _a.event) === null || _b === void 0 ? void 0 : _b.removeEventListener) === \"function\") {\n        // @ts-ignore\n        globalThis.AstroBox.event.removeEventListener(eventName);\n    }\n    else {\n        throw new Error(\"AstroBox.event.removeEventListener not available\");\n    }\n}\nexport function sendEvent(eventName, payload) {\n    var _a, _b;\n    // @ts-ignore\n    if (typeof ((_b = (_a = globalThis.AstroBox) === null || _a === void 0 ? void 0 : _a.event) === null || _b === void 0 ? void 0 : _b.sendEvent) === \"function\") {\n        // @ts-ignore\n        globalThis.AstroBox.event.sendEvent(eventName, payload);\n    }\n    else {\n        throw new Error(\"AstroBox.event.sendEvent not available\");\n    }\n}\n","import { base64ToUint8Array } from \"../utils.js\";\nexport async function pickFile(options) {\n    var _a, _b;\n    const options_ = {\n        decode_text: false,\n        encoding: \"undefined\",\n        ...options\n    };\n    // @ts-ignore\n    if (typeof ((_b = (_a = globalThis.AstroBox) === null || _a === void 0 ? void 0 : _a.filesystem) === null || _b === void 0 ? void 0 : _b.pickFile) === \"function\") {\n        // @ts-ignore\n        return JSON.parse(await globalThis.AstroBox.filesystem.pickFile(JSON.stringify(options_)));\n    }\n    else {\n        throw new Error(\"AstroBox.filesystem.pickFile not available\");\n    }\n}\nexport async function readFile(path, options) {\n    var _a, _b;\n    // @ts-ignore\n    if (typeof ((_b = (_a = globalThis.AstroBox) === null || _a === void 0 ? void 0 : _a.filesystem) === null || _b === void 0 ? void 0 : _b.readFile) === \"function\") {\n        let options_ = {\n            offset: 0,\n            decode_text: true,\n            ...options\n        };\n        // @ts-ignore\n        var result = await globalThis.AstroBox.filesystem.readFile(path, JSON.stringify(options_));\n        if (options_.decode_text) {\n            return result;\n        }\n        return base64ToUint8Array(result);\n    }\n    else {\n        throw new Error(\"AstroBox.filesystem.readFile not available\");\n    }\n}\nexport async function unloadFile(path) {\n    var _a, _b;\n    // @ts-ignore\n    if (typeof ((_b = (_a = globalThis.AstroBox) === null || _a === void 0 ? void 0 : _a.filesystem) === null || _b === void 0 ? void 0 : _b.unloadFile) === \"function\") {\n        // @ts-ignore\n        return await globalThis.AstroBox.filesystem.unloadFile(path);\n    }\n    else {\n        throw new Error(\"AstroBox.filesystem.unloadFile not available\");\n    }\n}\n","// @ts-ignore\nfunction call(name, file) {\n    var _a, _b;\n    // @ts-ignore\n    if (typeof ((_b = (_a = globalThis.AstroBox) === null || _a === void 0 ? void 0 : _a.installer) === null || _b === void 0 ? void 0 : _b[name]) === \"function\") {\n        // @ts-ignore\n        globalThis.AstroBox.installer[name](file);\n    }\n    else {\n        // @ts-ignore\n        throw new Error(`AstroBox.installer.${name} not available`);\n    }\n}\nexport const addThirdPartyAppToQueue = (f) => call(\"addThirdPartyAppToQueue\", f);\nexport const addWatchFaceToQueue = (f) => call(\"addWatchFaceToQueue\", f);\nexport const addFirmwareToQueue = (f) => call(\"addFirmwareToQueue\", f);\n","__webpack_require__.rv = () => (\"1.4.10\")","__webpack_require__.ruid = \"bundler=rspack@1.4.10\";\n","export async function sendQAICMessage(pkgName, data) {\n    var _a, _b;\n    // @ts-ignore\n    if (typeof ((_b = (_a = globalThis.AstroBox) === null || _a === void 0 ? void 0 : _a.interconnect) === null || _b === void 0 ? void 0 : _b.sendQAICMessage) === \"function\") {\n        // @ts-ignore\n        await globalThis.AstroBox.interconnect.sendQAICMessage(pkgName, data);\n    }\n    else {\n        throw new Error(\"AstroBox.interconnect.sendQAICMessage not available\");\n    }\n}\n","export function onLoad(cb) {\n    var _a, _b;\n    // @ts-ignore\n    if (typeof ((_b = (_a = globalThis.AstroBox) === null || _a === void 0 ? void 0 : _a.lifecycle) === null || _b === void 0 ? void 0 : _b.onLoad) === \"function\") {\n        // @ts-ignore\n        globalThis.AstroBox.lifecycle.onLoad(cb);\n    }\n    else {\n        throw new Error(\"AstroBox.lifecycle.onLoad not available\");\n    }\n}\n","export function regNativeFun(func) {\n    var _a, _b;\n    // @ts-ignore\n    if (typeof ((_b = (_a = globalThis.AstroBox) === null || _a === void 0 ? void 0 : _a.native) === null || _b === void 0 ? void 0 : _b.regNativeFun) === \"function\") {\n        // @ts-ignore\n        return globalThis.AstroBox.native.regNativeFun(func);\n    }\n    throw new Error(\"AstroBox.native.regNativeFun not available\");\n}\n","import { base64ToUint8Array, uint8ArrayToBase64 } from \"../utils.js\";\nexport async function fetch(url, options) {\n    var _a, _b;\n    // @ts-ignore\n    if (typeof ((_b = (_a = globalThis.AstroBox) === null || _a === void 0 ? void 0 : _a.network) === null || _b === void 0 ? void 0 : _b.fetch) === \"function\") {\n        // @ts-ignore\n        options.body_encoded = typeof options.body !== \"string\";\n        // @ts-ignore\n        options.body = options.body ? (options.body_encoded ? uint8ArrayToBase64(options.body) : options.body) : \"\";\n        // @ts-ignore\n        let ret = await globalThis.AstroBox.network.fetch(url, JSON.stringify({ raw: false, ...options }));\n        ret.body = options.raw ? base64ToUint8Array(ret.body) : ret.body;\n        return ret;\n    }\n    throw new Error(\"AstroBox.network.fetch not available\");\n}\n","export async function registerCommunityProvider(provider) {\n    var _a, _b;\n    // @ts-ignore\n    if (\n    // @ts-ignore\n    typeof ((_b = (_a = globalThis.AstroBox) === null || _a === void 0 ? void 0 : _a.provider) === null || _b === void 0 ? void 0 : _b.registerCommunityProvider) ===\n        \"function\") {\n        // @ts-ignore\n        await globalThis.AstroBox.provider.registerCommunityProvider(JSON.stringify(provider));\n    }\n    else {\n        throw new Error(\"AstroBox.provider.registerCommunityProvider not available\");\n    }\n}\n","export async function launchQA(appInfo, pageName) {\n    var _a, _b;\n    // @ts-ignore\n    if (typeof ((_b = (_a = globalThis.AstroBox) === null || _a === void 0 ? void 0 : _a.thirdpartyapp) === null || _b === void 0 ? void 0 : _b.launchQA) === \"function\") {\n        // @ts-ignore\n        await globalThis.AstroBox.thirdpartyapp.launchQA(JSON.stringify(appInfo), pageName);\n    }\n    else {\n        throw new Error(\"AstroBox.thirdpartyapp.launchQA not available\");\n    }\n}\nexport async function getThirdPartyAppList() {\n    var _a, _b;\n    // @ts-ignore\n    if (\n    // @ts-ignore\n    typeof ((_b = (_a = globalThis.AstroBox) === null || _a === void 0 ? void 0 : _a.thirdpartyapp) === null || _b === void 0 ? void 0 : _b.getThirdPartyAppList) ===\n        \"function\") {\n        // @ts-ignore\n        const raw = await globalThis.AstroBox.thirdpartyapp.getThirdPartyAppList();\n        return JSON.parse(raw);\n    }\n    throw new Error(\"AstroBox.thirdpartyapp.getThirdPartyAppList not available\");\n}\n","// @ts-ignore\nfunction call(name, arg) {\n    var _a, _b;\n    // @ts-ignore\n    if (typeof ((_b = (_a = globalThis.AstroBox) === null || _a === void 0 ? void 0 : _a.ui) === null || _b === void 0 ? void 0 : _b[name]) === \"function\") {\n        // @ts-ignore\n        globalThis.AstroBox.ui[name](arg);\n    }\n    else {\n        // @ts-ignore\n        throw new Error(`AstroBox.ui.${name} not available`);\n    }\n}\nexport const updatePluginSettingsUI = (ui) => call(\"updatePluginSettingsUI\", JSON.stringify(ui));\nexport const openPageWithNodes = (ui) => call(\"openPageWithNodes\", JSON.stringify(ui));\nexport const openPageWithUrl = (url) => call(\"openPageWithUrl\", url);\n","import { initApis } from \"./init.js\";\nconst AstroBox = {};\ninitApis(AstroBox);\nexport default AstroBox;\n","import * as configImpl from \"./impls/config.js\";\nimport * as debugImpl from \"./impls/debug.js\";\nimport * as deviceImpl from \"./impls/device.js\";\nimport * as eventImpl from \"./impls/event.js\";\nimport * as filesystemImpl from \"./impls/filesystem.js\";\nimport * as installerImpl from \"./impls/installer.js\";\nimport * as interconnectImpl from \"./impls/interconnect.js\";\nimport * as lifecycleImpl from \"./impls/lifecycle.js\";\nimport * as nativeImpl from \"./impls/native.js\";\nimport * as networkImpl from \"./impls/network.js\";\nimport * as providerImpl from \"./impls/provider.js\";\nimport * as thirdpartyImpl from \"./impls/thirdpartyapp.js\";\nimport * as uiImpl from \"./impls/ui.js\";\nexport function initApis(AstroBox) {\n    // Config APIs\n    AstroBox.config = {};\n    AstroBox.config.readConfig = configImpl.read;\n    AstroBox.config.writeConfig = configImpl.write;\n    // Debug APIs\n    AstroBox.debug = {};\n    AstroBox.debug.sendRaw = debugImpl.sendRaw;\n    // Device APIs\n    AstroBox.device = {};\n    AstroBox.device.getDeviceList = deviceImpl.getDeviceList;\n    AstroBox.device.getDeviceState = deviceImpl.getDeviceState;\n    AstroBox.device.modifyDeviceState = deviceImpl.modifyDeviceState;\n    AstroBox.device.disconnectDevice = deviceImpl.disconnectDevice;\n    // Event APIs\n    AstroBox.event = {};\n    AstroBox.event.addEventListener = eventImpl.addEventListener;\n    AstroBox.event.removeEventListener = eventImpl.removeEventListener;\n    AstroBox.event.sendEvent = eventImpl.sendEvent;\n    // Installer APIs\n    AstroBox.installer = {};\n    AstroBox.installer.addThirdPartyAppToQueue = installerImpl.addThirdPartyAppToQueue;\n    AstroBox.installer.addWatchFaceToQueue = installerImpl.addWatchFaceToQueue;\n    AstroBox.installer.addFirmwareToQueue = installerImpl.addFirmwareToQueue;\n    // Interconnect APIs\n    AstroBox.interconnect = {};\n    AstroBox.interconnect.sendQAICMessage = interconnectImpl.sendQAICMessage;\n    // Lifecycle APIs\n    AstroBox.lifecycle = {};\n    AstroBox.lifecycle.onLoad = lifecycleImpl.onLoad;\n    // Native APIs\n    AstroBox.native = {};\n    AstroBox.native.regNativeFun = nativeImpl.regNativeFun;\n    // Network APIs\n    AstroBox.network = {};\n    AstroBox.network.fetch = networkImpl.fetch;\n    // Provider APIs\n    AstroBox.provider = {};\n    AstroBox.provider.registerCommunityProvider = providerImpl.registerCommunityProvider;\n    // Third-Party App APIs\n    AstroBox.thirdpartyapp = {};\n    AstroBox.thirdpartyapp.launchQA = thirdpartyImpl.launchQA;\n    AstroBox.thirdpartyapp.getThirdPartyAppList = thirdpartyImpl.getThirdPartyAppList;\n    // UI APIs\n    AstroBox.ui = {};\n    AstroBox.ui.updatePluginSettingsUI = uiImpl.updatePluginSettingsUI;\n    AstroBox.ui.openPageWithNodes = uiImpl.openPageWithNodes;\n    AstroBox.ui.openPageWithUrl = uiImpl.openPageWithUrl;\n    // FileSystem APIs\n    AstroBox.filesystem = {};\n    AstroBox.filesystem.pickFile = filesystemImpl.pickFile;\n    AstroBox.filesystem.readFile = filesystemImpl.readFile;\n    AstroBox.filesystem.unloadFile = filesystemImpl.unloadFile;\n}\n","import AstroBox from \"astrobox-plugin-sdk\";\r\n\r\n// 配置参数\r\nconst cfApiUrl = \"https://astroboxplugins.1417402449.workers.dev/\";\r\nconst repo = \"zyhsck/ab-\";\r\n\r\n// 请求负载\r\nlet payload = {\r\n  model: \"\",  // FPRJ模型路径\r\n  file: \"\"   // Base64编码的图片数据\r\n};\r\n\r\nlet pickRet = null;\r\nlet resultText = \"等待生成...\"; // 初始化结果文本\r\nlet fprjFiles = [];  // 存储FPRJ文件列表\r\nlet finishcreate = false; // 是否完成创建\r\nlet releaseUrl = \"\"; // 存储生成后的下载链接\r\n// 选择文件按钮回调\r\nasync function choosepic() {\r\n  try {\r\n    console.log('[DEBUG] 开始选择文件...');\r\n    resultText = \"正在选择文件...\";\r\n    updateUI();\r\n\r\n    if (pickRet) {\r\n      console.log('[DEBUG] 卸载旧文件:', pickRet.path);\r\n      await AstroBox.filesystem.unloadFile(pickRet.path);\r\n    }\r\n    \r\n    // 选择文件\r\n    console.log('[DEBUG] 调用 pickFile API');\r\n    pickRet = await AstroBox.filesystem.pickFile({ \r\n      decode_text: false\r\n    });\r\n    \r\n    console.log('[DEBUG] 文件选择结果:', {\r\n      path: pickRet.path,\r\n      size: pickRet.size\r\n    });\r\n    \r\n    // 读取文件内容\r\n    console.log('[DEBUG] 读取文件内容:', pickRet.path);\r\n    const fileContent = await AstroBox.filesystem.readFile(pickRet.path, {\r\n      len: pickRet.size,\r\n      decode_text: false\r\n    });\r\n    \r\n    // 编码为 base64\r\n    console.log('[DEBUG] 编码文件为 base64');\r\n    payload.file = arrayBufferToBase64(fileContent);\r\n    \r\n    console.log('[DEBUG] 文件选择成功');\r\n    resultText = \"文件选择成功!\";\r\n    updateUI();\r\n  } catch (error) {\r\n    console.error('选择文件失败:', error);\r\n    resultText = \"文件选择错误: \" + error.message;\r\n    updateUI();\r\n  }\r\n}\r\n\r\n// 模板选择回调\r\nfunction handleFprjSelect(value) {\r\n  console.log('[DEBUG] 选择模板:', value);\r\n  payload.model = value;\r\n  resultText = `已选择模板: ${value}`;\r\n  updateUI();\r\n}\r\n\r\n// 提交按钮回调\r\nasync function handleSubmit() {\r\n  try {\r\n    console.log('[DEBUG] 开始处理提交');\r\n    let deviceList = AstroBox.device.getDeviceList();\r\n    console.log('[DEBUG] 蓝牙设备列表: ', JSON.stringify(deviceList));\r\n    if(deviceList.length === 0 || !deviceList[0]?.name) {\r\n      resultText = \"设备列表为空，请检查蓝牙是否开启或蓝牙设备是否正常连接\";\r\n      updateUI();\r\n      return;\r\n    }\r\n    if (!payload.file || !payload.model) {\r\n      console.log('[DEBUG] 缺少文件或模板');\r\n      resultText = \"请先选择图片和模板\";\r\n      updateUI();\r\n      return;\r\n    }\r\n\r\n    console.log('[DEBUG] 验证用户权限');\r\n    resultText = \"正在验证用户权限...\";\r\n    updateUI();\r\n\r\n    // 请求后端验证用户权限\r\n    const verifyUrl = \"https://picfacepro-users.1417402449.workers.dev/\";\r\n    console.log('[DEBUG] 请求验证URL:', verifyUrl);\r\n    const res = await AstroBox.network.fetch(verifyUrl, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      },\r\n      body: JSON.stringify({\r\n        deviceId: getDeviceMacAddress(),  // 替换为实际设备ID\r\n      })\r\n    });\r\n\r\n    console.log('[DEBUG] 验证响应:', {\r\n      status: res.status,\r\n      body: res.body\r\n    });\r\n    const data = JSON.parse(res.body);\r\n    if (!data.allowed) {\r\n      console.log('[DEBUG] 权限验证失败 - 完整响应:', JSON.stringify(data, null, 2));\r\n      resultText = \"权限验证失败: \" + (data.status || \"未购买或试用次数已用完\");\r\n      updateUI();\r\n      return;\r\n    }\r\n\r\n    console.log('[DEBUG] 权限验证通过');\r\n    resultText = \"正在处理...\";\r\n    updateUI();\r\n\r\n    // 发送请求到Cloudflare API\r\n    console.log('[DEBUG] 触发Cloudflare工作流');\r\n    const runId = await triggerWorkflowViaCF();\r\n    \r\n    // 直接构造Release URL\r\n    releaseUrl = `https://github.com/${repo}/releases/tag/face-${runId}`;\r\n    \r\n    resultText = `启动生成程序成功!若发现网页404,请稍等片刻后再试`;\r\n    finishcreate = true; // 标记为已完成创建\r\n    console.log('[DEBUG] 生成成功，下载链接:', releaseUrl);\r\n    updateUI();\r\n    \r\n    \r\n    \r\n\r\n  } catch (error) {\r\n    resultText = \"错误: \" + error.message;\r\n    updateUI();\r\n  }\r\n}\r\n\r\n// 更新UI\r\nfunction updateUI() {\r\n  const ui = [\r\n    {\r\n      node_id: \"tips_text1\",\r\n      visibility: true,\r\n      disabled: false,\r\n      content: {\r\n        type: \"Text\",\r\n        value: \"建议看完简介里的网站里的用户指南后再使用本插件\"\r\n      }\r\n    },\r\n    {\r\n      node_id: \"result_text1\",\r\n      visibility: true,\r\n      disabled: false,\r\n      content: {\r\n        type: \"Text\",\r\n        value: \"选择适配手表分辨率的图片(需要png或jpeg格式)\"\r\n      }\r\n    },\r\n    {\r\n      node_id: \"file_btn\",\r\n      visibility: true,\r\n      disabled: false,\r\n      content: {\r\n        type: \"Button\",\r\n        value: {\r\n          primary: true,\r\n          text: pickRet ? \"重新选择文件\" : \"选择文件\",\r\n          callback_fun_id: choosepicId\r\n        }\r\n      }\r\n    },\r\n    {\r\n      node_id: \"result_text2\",\r\n      visibility: true,\r\n      disabled: false,\r\n      content: {\r\n        type: \"Text\",\r\n        value: \"选择适配手表的模板\"\r\n      }\r\n    },\r\n    {\r\n      node_id: \"fprj_select\",\r\n      visibility: true,\r\n      disabled: false,\r\n      content: {\r\n        type: \"Dropdown\",\r\n        value: {\r\n          options: fprjFiles.length > 0 ? fprjFiles : [\"正在加载模板列表...\"],\r\n          callback_fun_id: handleFprjSelectId\r\n        }\r\n      }\r\n    },\r\n    {\r\n      node_id: \"result_text\",\r\n      visibility: true,\r\n      disabled: false,\r\n      content: {\r\n        type: \"Text\",\r\n        value: resultText\r\n      }\r\n    },\r\n    {\r\n      node_id: \"result_text2\",\r\n      visibility: !finishcreate,\r\n      disabled: false,\r\n      content: {\r\n        type: \"Text\",\r\n        value: \"未发电用户每个月只有2次免费机会\"\r\n      }\r\n    },\r\n    {\r\n      node_id: \"money_btn\",\r\n      visibility: finishcreate,\r\n      disabled: !finishcreate,\r\n      content: {\r\n        type: \"Button\",\r\n        value: {\r\n          primary: true,\r\n          text: \"购买无限下载资格\",\r\n          callback_fun_id: AstroBox.native.regNativeFun(() => {\r\n            AstroBox.ui.openPageWithUrl(\"https://afdian.com/item/7bc3420a6ab311f0a58152540025c377\");\r\n        })\r\n        }\r\n      }\r\n    },\r\n    {\r\n      node_id: \"submit_btn\",\r\n      visibility: true,\r\n      disabled: !payload.file || !payload.model,\r\n      content: {\r\n        type: \"Button\",\r\n        value: {\r\n          primary: true,\r\n          text: \"开始生成\",\r\n          callback_fun_id: handleSubmitId\r\n        }\r\n      }\r\n    },\r\n    {\r\n      node_id: \"open_link_btn\",\r\n      visibility: finishcreate,\r\n      disabled: !finishcreate,\r\n      content: {\r\n        type: \"Button\",\r\n        value: {\r\n          primary: true,\r\n          text: \"打开下载链接\",\r\n          callback_fun_id: openLinkFunId\r\n        }\r\n      }\r\n    }\r\n  ];\r\n\r\n  AstroBox.ui.updatePluginSettingsUI(ui);\r\n}\r\n\r\n// 注册回调函数\r\nconst choosepicId = AstroBox.native.regNativeFun(choosepic);\r\nconst handleFprjSelectId = AstroBox.native.regNativeFun(handleFprjSelect);\r\nconst handleSubmitId = AstroBox.native.regNativeFun(handleSubmit);\r\n// 注册回调函数并获取函数ID\r\nconst openLinkFunId = AstroBox.native.regNativeFun(() => {\r\n  AstroBox.ui.openPageWithUrl(releaseUrl);\r\n});\r\n  \r\n// 初始化UI\r\nresultText = \"正在加载模板列表...\";\r\nupdateUI();\r\n\r\n// 通过Cloudflare API触发工作流\r\nasync function triggerWorkflowViaCF() {\r\n  const generateUrl = `${cfApiUrl}?action=generate&repo=${encodeURIComponent(repo)}`;\r\n  \r\n  const res = await AstroBox.network.fetch(generateUrl, {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\"\r\n    },\r\n    body: JSON.stringify({\r\n      model: payload.model,\r\n      file: payload.file,\r\n      mac: getDeviceMacAddress()\r\n    })\r\n  });\r\n\r\n  if (res.status === 200) {\r\n    const data = JSON.parse(res.body);\r\n    if (data.status === 'success') {\r\n      return data.run_id;\r\n    } else {\r\n      throw new Error(data.message || '触发工作流失败');\r\n    }\r\n  } else {\r\n    throw new Error(`请求失败: ${res.status}`);\r\n  }\r\n}\r\n\r\n// 从API获取FPRJ列表\r\nasync function getFprjList() {\r\n  try {\r\n    console.log('正在从API获取FPRJ列表...');\r\n    const listUrl = `${cfApiUrl}?action=list&repo=${encodeURIComponent(repo)}&ext=fprj`;\r\n    \r\n    const res = await AstroBox.network.fetch(listUrl, {\r\n      method: \"GET\",\r\n      headers: {\r\n        \"Accept\": \"application/json\",\r\n        \"User-Agent\": \"AstroBox-Plugin\"\r\n      }\r\n    });\r\n\r\n    if (res.status === 200) {\r\n      const data = JSON.parse(res.body);\r\n      \r\n      if (data.status === 'success' && Array.isArray(data.files)) {\r\n        // 提取所有文件路径\r\n        fprjFiles = data.files.map(file => file.path);\r\n        resultText = `已找到 ${data.file_count} 个模板`;\r\n        updateUI();\r\n        return true;\r\n      } else {\r\n        throw new Error('API返回数据格式错误');\r\n      }\r\n    } else {\r\n      throw new Error(`API请求失败: ${res.status}`);\r\n    }\r\n  } catch (error) {\r\n    console.error('获取FPRJ列表失败:', error);\r\n    throw error;\r\n  }\r\n}\r\n\r\n// 获取设备 MAC 地址\r\nfunction getDeviceMacAddress() {\r\n  const devices = AstroBox.device.getDeviceList();\r\n  if (devices.length === 0) {\r\n    return \"\";\r\n  }\r\n  return devices[0].addr;\r\n\r\n}\r\n\r\n// 修改 base64 编码函数\r\nfunction arrayBufferToBase64(buffer) {\r\n  const bytes = new Uint8Array(buffer);\r\n  const chunks = [];\r\n  const chunkSize = 3;\r\n  \r\n  // 按3字节分组处理\r\n  for (let i = 0; i < bytes.length; i += chunkSize) {\r\n    const chunk = bytes.slice(i, i + chunkSize);\r\n    chunks.push(chunk);\r\n  }\r\n  \r\n  // base64 编码表\r\n  const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\r\n  let base64 = '';\r\n  \r\n  // 处理每个分组\r\n  chunks.forEach(chunk => {\r\n    const [b1, b2 = 0, b3 = 0] = chunk;\r\n    \r\n    // 4个6位的编码\r\n    const e1 = b1 >> 2;\r\n    const e2 = ((b1 & 3) << 4) | (b2 >> 4);\r\n    const e3 = ((b2 & 15) << 2) | (b3 >> 6);\r\n    const e4 = b3 & 63;\r\n    \r\n    // 根据实际字节数添加编码字符\r\n    if (chunk.length === 3) {\r\n      base64 += chars[e1] + chars[e2] + chars[e3] + chars[e4];\r\n    } else if (chunk.length === 2) {\r\n      base64 += chars[e1] + chars[e2] + chars[e3] + '=';\r\n    } else {\r\n      base64 += chars[e1] + chars[e2] + '==';\r\n    }\r\n  });\r\n\r\n  return base64;\r\n}\r\n\r\n// 修改初始化函数\r\nAstroBox.lifecycle.onLoad(async () => {\r\n  resultText = \"正在加载模板列表...\";\r\n  updateUI();\r\n  \r\n  try {\r\n    await getFprjList();\r\n  } catch (error) {\r\n    resultText = \"加载失败: \" + error.message;\r\n    updateUI();\r\n  }\r\n});"],"names":["read","_a","_b","globalThis","JSON","Error","write","content","uint8ArrayToBase64","bytes","base64abc","result","i","l","base64ToUint8Array","base64","table","padding","byteLength","arr","Uint8Array","byteIdx","n","sendRaw","data","getDeviceList","getDeviceState","addr","modifyDeviceState","state","disconnectDevice","addEventListener","eventName","callback","removeEventListener","sendEvent","payload","pickFile","options","options_","readFile","path","unloadFile","call","name","file","addThirdPartyAppToQueue","f","addWatchFaceToQueue","addFirmwareToQueue","sendQAICMessage","pkgName","onLoad","cb","regNativeFun","func","fetch","url","ret","registerCommunityProvider","provider","launchQA","appInfo","pageName","getThirdPartyAppList","arg","updatePluginSettingsUI","ui","openPageWithNodes","openPageWithUrl","AstroBox","initApis","configImpl","debugImpl","deviceImpl","eventImpl","installerImpl","interconnectImpl","lifecycleImpl","nativeImpl","networkImpl","providerImpl","thirdpartyImpl","uiImpl","filesystemImpl","cfApiUrl","repo","pickRet","resultText","fprjFiles","finishcreate","releaseUrl","choosepic","console","updateUI","fileContent","arrayBufferToBase64","buffer","chunks","chunk","chars","b1","b2","b3","e1","e2","e3","error","handleSubmit","_deviceList_","deviceList","verifyUrl","res","getDeviceMacAddress","runId","triggerWorkflowViaCF","choosepicId","handleFprjSelectId","handleSubmitId","openLinkFunId","value","generateUrl","encodeURIComponent","getFprjList","listUrl","Array","devices"],"mappings":"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"}